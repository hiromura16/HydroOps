# /opt/hydro-ops/docker/kapacitor/config/kapacitor.conf
hostname = "hydro_ops_kapacitor" # Kapacitorコンテナ自身のホスト名
data_dir = "/var/lib/kapacitor"  # Kapacitorのデータ保存ディレクトリ (コンテナ内)

[http]
  bind-address = ":9092" # Kapacitor APIがリッスンするアドレスとポート

[storage]
  # Where to store the Kapacitor boltdb database
  boltdb = "/var/lib/kapacitor/kapacitor.db"

# InfluxDB 2.x への接続設定
[[influxdb]]
  enabled = true
  name = "hydro_ops_influxdb" # この接続設定に付ける任意の名前
  default = true             # デフォルトのInfluxDB接続として使用するか
  urls = ["http://hydro_ops_influxdb:8086"] # InfluxDBサービスのURL (Dockerサービス名を使用)

  token = "${KAPACITOR_INFLUXDB_TOKEN}" # 環境変数 KAPACITOR_INFLUXDB_TOKEN を参照
  disable-subscriptions = true

  # InfluxDB 2.x の場合、TICKスクリプト内でデータベース(バケット)/リテンションポリシーを指定することが多いですが、
  # グローバルな設定として組織IDをここで指定することも可能です。
  organization-id = "${INFLUXDB_ORG_ID}"

  timeout = "10s"
  # subscription-protocol = "http" # InfluxDBからのデータストリーミングに使用するプロトコル
  # subscriptions-enabled = true   # サブスクリプションを有効にするか (ストリームタスクに必要)
  # insecure-skip-verify = false   # HTTPS接続時の証明書検証をスキップするか
  # startup-timeout = "5m"       # 起動時のInfluxDB接続タイムアウト
[logging]
    # Destination for logs
    # Can be a path to a file or 'STDOUT', 'STDERR'.
    file = "/var/log/kapacitor/kapacitor.log"
    # Logging level can be one of:
    # DEBUG, INFO, WARN, ERROR, or OFF
    level = "INFO"